---
title: å•åŸºå› TCGAçš„Coxæ£®æ—å›¾æ€ä¹ˆç”»æ‰å¥½çœ‹å‘¢
author: Song Ou-Yang
date: '2021-08-14'
slug: tcga-cox2
categories: []
tags:
  - R
subtitle: ''
summary: ''
authors: []
lastmod: '2021-08-14T18:47:49+08:00'
featured: no
image:
  caption: ''
  focal_point: ''
  preview_only: no
projects: []
---



<div id="è½¬è‡ªæˆ‘çš„ç®€ä¹¦httpswww.jianshu.comp145b2dc338a0" class="section level3">
<h3>è½¬è‡ªæˆ‘çš„ç®€ä¹¦<a href="https://www.jianshu.com/p/145b2dc338a0">https://www.jianshu.com/p/145b2dc338a0</a></h3>
<p>é¦–å…ˆè°ƒå–Xenaç½‘é¡µçš„TCGAæ•°æ®åšCoxç”Ÿå­˜åˆ†æï¼Œæ•°æ®å¯ä»¥é€šè¿‡hiplotå®˜ç½‘è‡ªä¸»ç ”å‘çš„ucsc-xena-shinyç›´æ¥åœ¨çº¿è·å–
è®¿é—®<a href="https://hiplot.com.cn/advance/ucsc-xena-shiny">https://hiplot.com.cn/advance/ucsc-xena-shiny</a>
ç„¶å<code>å…¨å±</code>æ˜¾ç¤ºï¼Œç‚¹å‡»<code>Qucik PanCan Analysis</code>ä¸‹æ–¹çš„<code>TCGAï¼šMolcular Profile Cox Analysis</code></p>
<p>è¾“å…¥ä¸€ä¸ªä½ æƒ³è¦çš„åŸºå› ï¼Œæ¯”å¦‚<code>RAC3</code>ï¼Œ<code>Select Measure for plot</code>å¯ä»¥è®¾ç½®<code>OS</code>ï¼Œ<code>PFI</code>ï¼Œ<code>DSS</code>å’Œ<code>DFI</code>ï¼Œç„¶åç‚¹ä¸Šæ–¹çš„æœç´¢ğŸ”ï¼Œå°±å¯ä»¥çœ‹åˆ°å‡ºçš„å›¾äº†</p>
<p>ç»§ç»­å¾€ä¸‹æ»šåŠ¨é¼ æ ‡ï¼Œå°±å¯ä»¥çœ‹åˆ°æ•°æ®äº†ï¼Œè€Œä¸”è¿˜å¯ä»¥ä¸‹è½½</p>
<p>å¾—åˆ°æ•°æ®ä»¥åå°±å¯ä»¥ç”¨Rç”»å›¾äº†ï¼Œæ³¨æ„ï¼Œè¿™é‡Œçš„HRå’ŒCIéƒ½æ˜¯Logè¿‡çš„ç»“æœï¼Œè·Ÿåˆ«çš„åœ°æ–¹è®¡ç®—çš„Coxç»“æœæœ‰äº›ä¸ä¸€æ ·ï¼Œå¯èƒ½æ˜¯æ–¹æ³•ä¸ä¸€æ ·å§ï¼Œæ˜¯å› ä¸ºç½‘ç«™è®¡ç®—çš„HRç»“æœç›¸å·®å¤ªå¤§äº†å—ï¼Ÿ
ç”±äºæ˜¯logè¿‡çš„ç»“æœï¼Œæ‰€ä»¥æ£®æ—å›¾çš„Xè½´ä¸å†æ˜¯HR=1ä¸ºåˆ†ç•Œçº¿äº†ï¼Œè€Œæ˜¯ä»¥log2HR=<code>0</code>ä¸ºåˆ†ç•Œçº¿ã€‚ã€‚ã€‚</p>
<pre class="r"><code>RAC3_mRNA_OS_pancan_unicox &lt;- read.csv(&quot;~/Desktop/RAC3_mRNA_OS_pancan_unicox.csv&quot;) ##åŠ è½½csvæ•°æ®
library(ggplot2)
ggplot(RAC3_mRNA_OS_pancan_unicox, aes(HR_log, cancer, col=Type))+  ##å®šä¹‰Xè½´å’ŒYè½´ï¼Œä»¥ç±»å‹åˆ†ç±»
  geom_point(size=2.5)+  #å›ºå®šç‚¹çš„å¤§å°
  geom_errorbarh(aes(xmax =upper_95_log, xmin = lower_95_log), height = 0.4)+ ##è®¾ç½®95%CIåŒºé—´ï¼Œå°±æ˜¯è¯¯å·®çº¿
  scale_x_continuous(limits= c(-2, 2), breaks= seq(-1, 1, 1))+ ##è®¾ç½®Xè½´èŒƒå›´ï¼Œåˆ†å‰²ç‚¹ä»-1åˆ°1ï¼Œä»¥1ä¸ºåˆ†ç•Œï¼Œå…·ä½“åˆ†ç•Œçœ‹æ•°å­—åˆ†å¸ƒ
  geom_vline(aes(xintercept = 0))+ #ä»¥0ä¸ºåˆ†ç•Œçº¿
  xlab(&#39;HR(95%CI)&#39;) + ylab(&#39; &#39;)+  #å®šä¹‰æ ‡ç­¾
  theme_bw(base_size = 12)+ #ä¸»é¢˜å’Œå­—ä½“
  scale_color_manual(values = c(&quot;gray&quot;, &quot;steelblue&quot;, &quot;brown&quot;)) #è®¾ç½®é¢œè‰²</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-1-1.png" width="672" />
#### å¯ä»¥æ¢ä¸€ä¸‹ä¸åŒçš„å½¢çŠ¶è¡¨ç¤ºä¸åŒçš„çŠ¶æ€,ç”¨çš„æ˜¯<code>shape=Type</code></p>
<pre class="r"><code>ggplot(RAC3_mRNA_OS_pancan_unicox, aes(HR_log, cancer, col=Type,shape=Type))+ #è®¾ç½®ä¸åŒçš„å½¢çŠ¶
  geom_point(size=3)+
  geom_errorbarh(aes(xmax =upper_95_log, xmin = lower_95_log), height = 0.4)+
  scale_x_continuous(limits= c(-2, 2), breaks= seq(-1, 1, 1))+
  geom_vline(aes(xintercept = 0))+
  xlab(&#39;HR(95%CI)&#39;) + ylab(&#39; &#39;)+
  theme_bw(base_size = 12)+
  scale_color_manual(values = c(&quot;gray&quot;, &quot;steelblue&quot;, &quot;brown&quot;))</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-2-1.png" width="672" />
### è¿™ä¸ªå›¾çœ‹èµ·æ¥æ‰€æœ‰çš„å½¢çŠ¶å’Œç‚¹éƒ½ä¸€æ ·å¤§,ç”¨ä»€ä¹ˆåŠæ³•åŒºåˆ«På€¼,ç±»ä¼¼ç«å±±å›¾,æˆ‘ä»¬å¯ä»¥å–-log10På€¼,è¿™æ ·è¶Šå¤§å°±è¶Šæ˜¾è‘—</p>
<pre class="r"><code># ä»¥-log10På€¼å®šä¹‰ç‚¹çš„å¤§å°ï¼Œç‚¹è¶Šå¤§ï¼ŒPå€¼è¶Šå°ï¼Œè¶Šæœ‰ç»Ÿè®¡å­¦æ„ä¹‰
ggplot(RAC3_mRNA_OS_pancan_unicox, aes(HR_log, cancer, col=Type))+
  geom_point(aes(size=-log10(p.value)))+
  geom_errorbarh(aes(xmax =upper_95_log, xmin = lower_95_log), height = 0.4)+
  scale_x_continuous(limits= c(-2, 2), breaks= seq(-1, 1, 1))+
  geom_vline(aes(xintercept = 0))+
  xlab(&#39;HR(95%CI)&#39;) + ylab(&#39; &#39;)+
  theme_bw(base_size = 12)+
  scale_color_manual(values = c(&quot;gray&quot;, &quot;steelblue&quot;, &quot;brown&quot;))</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-3-1.png" width="672" />
### å†åŠ ä¸€ä¸ªå½¢çŠ¶</p>
<pre class="r"><code>ggplot(RAC3_mRNA_OS_pancan_unicox, aes(HR_log, cancer, col=Type,shape=Type))+
  geom_point(aes(size=-log10(p.value)))+
  geom_errorbarh(aes(xmax =upper_95_log, xmin = lower_95_log), height = 0.4)+
  scale_x_continuous(limits= c(-2, 2), breaks= seq(-1, 1, 1))+
  geom_vline(aes(xintercept = 0))+
  xlab(&#39;HR(95%CI)&#39;) + ylab(&#39; &#39;)+
  theme_bw(base_size = 12)+
  scale_color_manual(values = c(&quot;gray&quot;, &quot;steelblue&quot;, &quot;brown&quot;))</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-4-1.png" width="672" /></p>
</div>
<div id="çœ‹èµ·æ¥å¾ˆå‡Œä¹±æ’ä¸ªåºå¯å¥½ç”¨çš„æ˜¯reorderå‡½æ•°" class="section level3">
<h3>çœ‹èµ·æ¥å¾ˆå‡Œä¹±,æ’ä¸ªåºå¯å¥½,ç”¨çš„æ˜¯<code>reorderå‡½æ•°</code></h3>
<pre class="r"><code>ggplot(RAC3_mRNA_OS_pancan_unicox, aes(HR_log,  reorder(cancer,HR_log),  col=Type,shape=Type))+
         geom_point(aes(size=-log10(p.value)))+
         geom_errorbarh(aes(xmax =upper_95_log, xmin = lower_95_log), height = 0.4)+
         scale_x_continuous(limits= c(-2, 2), breaks= seq(-1, 1, 1))+
         geom_vline(aes(xintercept = 0))+
         xlab(&#39;HR(95%CI)&#39;) + ylab(&#39; &#39;)+
        theme_bw(base_size = 12)+
         scale_color_manual(values = c(&quot;gray&quot;, &quot;steelblue&quot;, &quot;brown&quot;))</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
</div>
<div id="æ¢ä¸ªæ’åºæ–¹å¼ä¹Ÿè¡Œ" class="section level3">
<h3>æ¢ä¸ªæ’åºæ–¹å¼ä¹Ÿè¡Œ</h3>
<pre class="r"><code>ggplot(RAC3_mRNA_OS_pancan_unicox, aes(HR_log,  reorder(cancer,-HR_log),  col=Type,shape=Type))+
         geom_point(aes(size=-log10(p.value)))+
         geom_errorbarh(aes(xmax =upper_95_log, xmin = lower_95_log), height = 0.4)+
         scale_x_continuous(limits= c(-2, 2), breaks= seq(-1, 1, 1))+
         geom_vline(aes(xintercept = 0))+
         xlab(&#39;HR(95%CI)&#39;) + ylab(&#39; &#39;)+
        theme_bw(base_size = 12)+
         scale_color_manual(values = c(&quot;gray&quot;, &quot;steelblue&quot;, &quot;brown&quot;))</code></pre>
<p><img src="{{< blogdown/postref >}}index_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>æ›´å¤šå®šåˆ¶ï¼Œç­‰ä½ å‘ç°ã€‚ã€‚ã€‚</p>
</div>
